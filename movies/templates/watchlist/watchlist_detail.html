{% extends 'base.html' %}

{% block searchbar %}
{% include 'searchbar.html' %}
{% endblock %}


{% block start %}

<div class="watchlist-container">
    <div style="display: flex; justify-content: space-between;">
        <h1>My Watchlist</h1>
        <button onclick="toggleWatchlistClick()">Show-all</button>
    </div>
    <div class="toggle-watchlist">
    {% for watchlist_movie in watchlist %}
    <div class="watchlist-movie-card " id="movie2">
        <img src="{{watchlist_movie.movie__poster_url}}" alt="Unfrosted">
        <div class="watchlist-movie-details">
            <h2 class="watchlist-movie-title">{{watchlist_movie.movie__title}}</h2>
            <!-- <p class="watchlist-movie-id">ID: {{watchlist_movie.movie_id}} </p> -->
            <p class="watch-status {% if watchlist_movie.watched %}watched{% else %}not-watched{% endif %}" id="status{{watchlist_movie.movie_id}}">
                {% if watchlist_movie.watched %}Watched{% else %}Not Watched{% endif %}
            </p>
        </div>
        <form action="/add_to_watchlist/{{watchlist_movie.movie_id}}/" method="post">
            {% csrf_token %}
            <button class="watchlist-toggle-button" >Toggle status</button>
        </form>
    </div>

    
    {% endfor %}
</div>  
</div>


</div>
{% endblock %}

{% block scripts %}
<script>
    function toggleWatchlistClick(){
        const ele = document.querySelector('.toggle-watchlist');
        if (ele.style.display == 'none'){
            ele.style.display = 'block'
        }else{
            ele.style.display = 'none'
        }
    }
</script>
{% endblock %}